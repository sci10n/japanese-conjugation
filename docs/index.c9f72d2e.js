function t(t){return null===t?"null":t!==Object(t)?typeof t:{}.toString.call(t).slice(8,-1).toLowerCase()}function e(e){return"string"!==t(e)||!e.length}function n(t="",n,r){if(e(t))return!1;const i=t.charCodeAt(0);return n<=i&&i<=r}const r="toHiragana",i="toKatakana",a="hepburn",o={useObsoleteKana:!1,passRomaji:!1,upcaseKatakana:!1,IMEMode:!1,convertLongVowelMark:!0,romanization:a},s=12353,c=[65313,65338],u=[65345,65370],l=[65377,65381],d=[[12288,12351],l,[12539,12540],[65281,65295],[65306,65311],[65339,65343],[65371,65376],[65504,65518]],f=[...[[12352,12447],[12448,12543],l,[65382,65439]],...d,c,u,[65296,65305],[19968,40959],[13312,19903]];function g(t=""){return f.some((([e,r])=>n(t,e,r)))}function y(n="",r){const i="regexp"===t(r);return!e(n)&&[...n].every((t=>{const e=g(t);return i?e||r.test(t):e}))}var m=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function p(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(r=t[n],i=e[n],!(r===i||m(r)&&m(i)))return!1;var r,i;return!0}function h(t,e){void 0===e&&(e=p);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var a=t.apply(this,r);return n={lastResult:a,lastArgs:r,lastThis:this},a}return r.clear=function(){n=null},r}var v=Object.prototype.hasOwnProperty;function b(t,e,n){for(n of t.keys())if(j(n,e))return n}function j(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&j(t[r],e[r]););return-1===r}if(n===Set){if(t.size!==e.size)return!1;for(r of t){if((i=r)&&"object"==typeof i&&!(i=b(e,i)))return!1;if(!e.has(i))return!1}return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t){if((i=r[0])&&"object"==typeof i&&!(i=b(e,i)))return!1;if(!j(r[1],e.get(i)))return!1}return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return-1===r}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return-1===r}if(!n||"object"==typeof t){for(n in r=0,t){if(v.call(t,n)&&++r&&!v.call(e,n))return!1;if(!(n in e)||!j(t[n],e[n]))return!1}return Object.keys(e).length===r}}return t!=t&&e!=e}const k=(t={})=>Object.assign({},o,t);function E(t,e,n){const r=e;function i(t,e){const n=t.charAt(0);return a(Object.assign({"":n},r[n]),t.slice(1),e,e+1)}function a(t,e,r,o){if(!e)return n||1===Object.keys(t).length?t[""]?[[r,o,t[""]]]:[]:[[r,o,null]];if(1===Object.keys(t).length)return[[r,o,t[""]]].concat(i(e,o));const s=function(t,e){if(void 0!==t[e])return Object.assign({"":t[""]+e},t[e])}(t,e.charAt(0));return void 0===s?[[r,o,t[""]]].concat(i(e,o)):a(s,e.slice(1),r,o+1)}return i(t,0)}function w(e){return Object.entries(e).reduce(((e,[n,r])=>{const i="string"===t(r);return e[n]=i?{"":r}:w(r),e}),{})}function O(t,e){return e.split("").reduce(((t,e)=>(void 0===t[e]&&(t[e]={}),t[e])),t)}function S(e={}){const n={};return"object"===t(e)&&Object.entries(e).forEach((([t,e])=>{let r=n;t.split("").forEach((t=>{void 0===r[t]&&(r[t]={}),r=r[t]})),r[""]=e})),function(e){return function e(n,r){return void 0===n||"string"===t(n)?r:Object.entries(r).reduce(((t,[r,i])=>(t[r]=e(n[r],i),t)),n)}(JSON.parse(JSON.stringify(e)),n)}}function I(e,n){return n?"function"===t(n)?n(e):S(n)(e):e}const x={a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}},B={".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"},N={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},A={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},L={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},C={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},q=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},L,A),J={yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"},M={wh:"う",kw:"く",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"};function T(){const t=w(x),e=e=>O(t,e);function n(t){return Object.entries(t).reduce(((t,[e,r])=>(t[e]=e?n(r):`っ${r}`,t)),{})}return Object.entries(N).forEach((([t,n])=>{Object.entries(A).forEach((([r,i])=>{e(t+r)[""]=n+i}))})),Object.entries(B).forEach((([t,n])=>{e(t)[""]=n})),Object.entries(M).forEach((([t,n])=>{Object.entries(L).forEach((([r,i])=>{e(t+r)[""]=n+i}))})),["n","n'","xn"].forEach((t=>{e(t)[""]="ん"})),t.c=JSON.parse(JSON.stringify(t.k)),Object.entries(C).forEach((([t,n])=>{const r=t.slice(0,t.length-1),i=t.charAt(t.length-1);e(r)[i]=JSON.parse(JSON.stringify(e(n)))})),Object.entries(q).forEach((([t,n])=>{const r=t=>t.charAt(t.length-1),i=t=>t.slice(0,t.length-1),a=e(`x${t}`);a[""]=n;var o;e(`l${i(t)}`)[r(t)]=a,(o=t,[...Object.entries(C),["c","k"]].reduce(((t,[e,n])=>o.startsWith(n)?t.concat(o.replace(n,e)):t),[])).forEach((n=>{["l","x"].forEach((a=>{e(a+i(n))[r(n)]=e(a+t)}))}))})),Object.entries(J).forEach((([t,n])=>{e(t)[""]=n})),[...Object.keys(N),"c","y","w","j"].forEach((e=>{const r=t[e];r[e]=n(r)})),delete t.n.n,Object.freeze(JSON.parse(JSON.stringify(t)))}let R=null;const z=S({wi:"ゐ",we:"ゑ"});function W(t=""){return!e(t)&&n(t,65,90)}function P(t=""){return!e(t)&&12540===t.charCodeAt(0)}function $(t=""){return!e(t)&&12539===t.charCodeAt(0)}function K(t=""){return!e(t)&&(!!P(t)||n(t,s,12438))}function H(t=""){const e=[];return t.split("").forEach((t=>{if(P(t)||$(t))e.push(t);else if(K(t)){const n=t.charCodeAt(0)+96,r=String.fromCharCode(n);e.push(r)}else e.push(t)})),e.join("")}const V=h(((t,e,n)=>{let r=(null==R&&(R=T()),R);return r=t?function(t){const e=JSON.parse(JSON.stringify(t));return e.n.n={"":"ん"},e.n[" "]={"":"ん"},e}(r):r,r=e?z(r):r,n&&(r=I(r,n)),r}),j);function D(t="",e={},n){let a;return n?a=e:(a=k(e),n=V(a.IMEMode,a.useObsoleteKana,a.customKanaMapping)),function(t="",e={},n){const{IMEMode:r,useObsoleteKana:i,customKanaMapping:a}=e;n||(n=V(r,i,a));return E(t.toLowerCase(),n,!r)}(t,a,n).map((e=>{const[n,o,s]=e;if(null===s)return t.slice(n);const c=a.IMEMode===r,u=a.IMEMode===i||[...t.slice(n,o)].every(W);return c||!u?s:H(s)})).join("")}let U=[];function Q(t){const e=Object.assign({},k(t),{IMEMode:t.IMEMode||!0}),n=V(e.IMEMode,e.useObsoleteKana,e.customKanaMapping),r=[...Object.keys(n),...Object.keys(n).map((t=>t.toUpperCase()))];return function({target:t}){undefined!==t.value&&"true"!==t.dataset.ignoreComposition&&function(t,e,n,r,i){const[a,o,s]=function(t="",e=0,n=[]){let r,i,a;0===e&&n.includes(t[0])?[r,i,a]=function(t,e){return["",..._(t,(t=>e.includes(t)||!y(t,/[0-9]/)))]}(t,n):e>0?[r,i,a]=function(t="",e=0){const[n,r]=_([...t.slice(0,e)].reverse(),(t=>!y(t)));return[r.reverse().join(""),n.split("").reverse().join(""),t.slice(e)]}(t,e):([r,i]=_(t,(t=>!n.includes(t))),[i,a]=_(i,(t=>!y(t))));return[r,i,a]}(t.value,t.selectionEnd,r),c=D(o,e,n);if(o!==c){const e=a.length+c.length,n=a+c+s;t.value=n,s.length?setTimeout((()=>t.setSelectionRange(e,e)),1):t.setSelectionRange(e,e)}}(t,e,n,r)}}function X({type:t,target:e,data:n}){/Mac/.test(window.navigator&&window.navigator.platform)&&("compositionupdate"===t&&y(n)&&(e.dataset.ignoreComposition="true"),"compositionend"===t&&(e.dataset.ignoreComposition="false"))}function _(t={},e=(t=>!!t)){const n=[],{length:r}=t;let i=0;for(;i<r&&e(t[i],i);)n.push(t[i]),i+=1;return[n.join(""),t.slice(i)]}const F={input:({target:{value:t,selectionStart:e,selectionEnd:n}})=>console.log("input:",{value:t,selectionStart:e,selectionEnd:n}),compositionstart:()=>console.log("compositionstart"),compositionupdate:({target:{value:t,selectionStart:e,selectionEnd:n},data:r})=>console.log("compositionupdate",{data:r,value:t,selectionStart:e,selectionEnd:n}),compositionend:()=>console.log("compositionend")},G=["TEXTAREA","INPUT"];let Y=0;function Z(t={},e={},n=!1){if(!G.includes(t.nodeName))throw new Error(`Element provided to Wanakana bind() was not a valid input or textarea element.\n Received: (${JSON.stringify(t)})`);const r=Q(e),i=(Y+=1,`${Date.now()}${Y}`);var a;t.setAttribute("data-wanakana-id",i),t.setAttribute("lang","ja"),t.setAttribute("autoCapitalize","none"),t.setAttribute("autoCorrect","off"),t.setAttribute("autoComplete","off"),t.setAttribute("spellCheck","false"),t.addEventListener("input",r),t.addEventListener("compositionupdate",X),t.addEventListener("compositionend",X),function(t,e,n){U=U.concat({id:t,inputHandler:e,compositionHandler:n})}(i,r,X),!0===n&&(a=t,Object.entries(F).forEach((([t,e])=>a.addEventListener(t,e))))}let tt=null;const et={"あ":"a","い":"i","う":"u","え":"e","お":"o","か":"ka","き":"ki","く":"ku","け":"ke","こ":"ko","さ":"sa","し":"shi","す":"su","せ":"se","そ":"so","た":"ta","ち":"chi","つ":"tsu","て":"te","と":"to","な":"na","に":"ni","ぬ":"nu","ね":"ne","の":"no","は":"ha","ひ":"hi","ふ":"fu","へ":"he","ほ":"ho","ま":"ma","み":"mi","む":"mu","め":"me","も":"mo","ら":"ra","り":"ri","る":"ru","れ":"re","ろ":"ro","や":"ya","ゆ":"yu","よ":"yo","わ":"wa","ゐ":"wi","ゑ":"we","を":"wo","ん":"n","が":"ga","ぎ":"gi","ぐ":"gu","げ":"ge","ご":"go","ざ":"za","じ":"ji","ず":"zu","ぜ":"ze","ぞ":"zo","だ":"da","ぢ":"ji","づ":"zu","で":"de","ど":"do","ば":"ba","び":"bi","ぶ":"bu","べ":"be","ぼ":"bo","ぱ":"pa","ぴ":"pi","ぷ":"pu","ぺ":"pe","ぽ":"po","ゔぁ":"va","ゔぃ":"vi","ゔ":"vu","ゔぇ":"ve","ゔぉ":"vo"},nt={"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~","ー":"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "},rt=["あ","い","う","え","お","や","ゆ","よ"],it={"ゃ":"ya","ゅ":"yu","ょ":"yo"},at={"ぃ":"yi","ぇ":"ye"},ot={"ぁ":"a","ぃ":"i","ぅ":"u","ぇ":"e","ぉ":"o"},st=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"],ct={"し":"sh","ち":"ch","じ":"j","ぢ":"j"},ut={"っ":"","ゃ":"ya","ゅ":"yu","ょ":"yo","ぁ":"a","ぃ":"i","ぅ":"u","ぇ":"e","ぉ":"o"},lt={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};function dt(){return null==tt&&(tt=function(){const t=w(et),e=e=>O(t,e),n=(t,n)=>{e(t)[""]=n};return Object.entries(nt).forEach((([t,n])=>{e(t)[""]=n})),[...Object.entries(it),...Object.entries(ot)].forEach((([t,e])=>{n(t,e)})),st.forEach((t=>{const r=e(t)[""][0];Object.entries(it).forEach((([e,i])=>{n(t+e,r+i)})),Object.entries(at).forEach((([e,i])=>{n(t+e,r+i)}))})),Object.entries(ct).forEach((([t,e])=>{Object.entries(it).forEach((([r,i])=>{n(t+r,e+i[1])})),n(`${t}ぃ`,`${e}yi`),n(`${t}ぇ`,`${e}e`)})),t["っ"]=ft(t),Object.entries(ut).forEach((([t,e])=>{n(t,e)})),rt.forEach((t=>{n(`ん${t}`,`n'${e(t)[""]}`)})),Object.freeze(JSON.parse(JSON.stringify(t)))}()),tt}function ft(t){return Object.entries(t).reduce(((t,[e,n])=>{if(e)t[e]=ft(n);else{const r=n.charAt(0);t[e]=Object.keys(lt).includes(r)?lt[r]+n:n}return t}),{})}h(((t,e)=>{let n=function(t){return t===a?dt():{}}(t);return e&&(n=I(n,e)),n}),j);function gt(t){return"u"==t.wordJSON.type||"ru"==t.wordJSON.type||"irv"==t.wordJSON.type?"v":"i"==t.wordJSON.type||"na"==t.wordJSON.type||"ira"==t.wordJSON.type?"a":void 0}function yt(t,e){return t.conjugation.tense!=e}const mt={verb:function(t){return"v"!=gt(t)},verbs:{verbpresent:function(t){return yt(t,"Present")},verbpast:function(t){return yt(t,"Past")},verbte:function(t){return yt(t,"て-form")},verbaffirmative:function(t){return!0!==t.conjugation.affirmative},verbnegative:function(t){return!1!==t.conjugation.affirmative},verbplain:function(t){return!1!==t.conjugation.polite},verbpolite:function(t){return!0!==t.conjugation.polite},verbu:function(t){return"u"!=t.wordJSON.type},verbru:function(t){return"ru"!=t.wordJSON.type},verbirregular:function(t){return"irv"!=t.wordJSON.type}},adjective:function(t){return"a"!=gt(t)},adjectives:{adjectivepresent:function(t){return yt(t,"Present")},adjectivepast:function(t){return yt(t,"Past")},adjectiveadverb:function(t){return yt(t,"Adverb")},adjectiveaffirmative:function(t){return!0!==t.conjugation.affirmative},adjectivenegative:function(t){return!1!==t.conjugation.affirmative},adjectiveplain:function(t){return!1!==t.conjugation.polite},adjectivepolite:function(t){return!0!==t.conjugation.polite},adjectivei:function(t){return"i"!=t.wordJSON.type},adjectivena:function(t){return"na"!=t.wordJSON.type},adjectiveirregular:function(t){return"ira"!=t.wordJSON.type}}},pt=function(t){document.getElementById("conjugation-inquery-text").className=t?"":"hide-emojis"},ht=function(t){document.querySelectorAll(".streak").forEach((e=>{t?e.classList.remove("display-none"):e.classList.add("display-none")}))},vt=function(t,e=!1){let n=document.getElementById("translation");n.classList.remove("display-none"),n.classList.remove("transparent"),t?e&&n.classList.add("transparent"):n.classList.add("display-none")},bt={verbs:[{kanji:"行<rt>い</rt>く",type:"irv",eng:"gå"},{kanji:"する",type:"irv",eng:"göra"},{kanji:"来<rt>く</rt>る",type:"irv",eng:"komma"},{kanji:"ある",type:"irv",eng:"ha, finns, är (objekt)"},{kanji:"いる",type:"ru",eng:"finns, är (levande)"},{kanji:"食<rt>た</rt>べる",type:"ru",eng:"äta"},{kanji:"起<rt>お</rt>きる",type:"ru",eng:"att vakna"},{kanji:"あげる",type:"ru",eng:"ge"},{kanji:"見<rt>み</rt>る",type:"ru",eng:"se, titta"},{kanji:"開<rt>あ</rt>ける",type:"ru",eng:"öppna"},{kanji:"寝<rt>ね</rt>る",type:"ru",eng:"sova, gå till sängs"},{kanji:"帰<rt>かえ</rt>る",type:"ru",eng:"återvända, gå hem"},{kanji:"買<rt>か</rt>う",type:"u",eng:"köpa"},{kanji:"会<rt>あ</rt>う",type:"u",eng:"träffas"},{kanji:"言<rt>い</rt>う",type:"u",eng:"säga, uttala"},{kanji:"使<rt>つか</rt>う",type:"u",eng:"använda"},{kanji:"待<rt>ま</rt>つ",type:"u",eng:"vänta"},{kanji:"聞<rt>き</rt>く",type:"u",eng:"höra, lyssna"},{kanji:"聞<rt>く</rt>く",type:"u",eng:"fråga"},{kanji:"働<rt>はたら</rt>く",type:"u",eng:"arbeta"},{kanji:"死<rt>し</rt>ぬ",type:"u",eng:"dö, avlida"},{kanji:"飲<rt>の</rt>む",type:"u",eng:"dricka"},{kanji:"読<rt>よ</rt>む",type:"u",eng:"läsa"},{kanji:"遊<rt>あそ</rt>ぶ",type:"u",eng:"leka, ha kul"},{kanji:"話<rt>はな</rt>す",type:"u",eng:"prata, tala"},{kanji:"泳<rt>およ</rt>ぐ",type:"u",eng:"simma"},{kanji:"分<rt>わ</rt>かる",type:"u",eng:"förstå"},{kanji:"勉<rt>べんきょう</rt>強する",type:"irv",eng:"studera"},{kanji:"借<rt>か</rt>りる",type:"ru",eng:"låna, hyra"},{kanji:"乗<rt>の</rt>る",type:"u",eng:"kliva på, åka"},{kanji:"座<rt>すわ</rt>る",type:"u",eng:"sitta"},{kanji:"撮<rt>と</rt>る",type:"u",eng:"ta en bild"},{kanji:"出<rt>で</rt>かける",type:"ru",eng:"gå ut"},{kanji:"教<rt>おし</rt>える",type:"ru",eng:"undervisa, berätta"},{kanji:"電<rt>でわ</rt>話する",type:"irv",eng:"ringa"},{kanji:"持<rt>も</rt>ってくる",type:"irv",eng:"ta med (objekt)"},{kanji:"連<rt>つ</rt>れる",type:"ru",eng:"ta med (person)"},{kanji:"おしえる",type:"ru",eng:"att undervisa"},{kanji:"ゆうする",type:"irv",eng:"att ha"},{kanji:"すく",type:"u",eng:"att gilla"},{kanji:"はなす",type:"u",eng:"tala"}],adjectives:[{kanji:"いい",type:"ira",eng:"good"},{kanji:"かっこいい",type:"ira",eng:"cool, handsome"},{kanji:"赤<rt>あか</rt>い",type:"i",eng:"red"},{kanji:"新<rt>あたら</rt>しい",type:"i",eng:"new"},{kanji:"暑<rt>あつ</rt>い",type:"i",eng:"hot (weather)"},{kanji:"危<rt>あぶ</rt>ない",type:"i",eng:"dangerous"},{kanji:"美<rt>お</rt>味<rt>い</rt>しい",type:"i",eng:"delicious"},{kanji:"大<rt>おお</rt>きい",type:"i",eng:"big"},{kanji:"遅<rt>おそ</rt>い",type:"i",eng:"late, slow"},{kanji:"面<rt>おも</rt>白<rt>しろ</rt>い",type:"i",eng:"interesting, funny"},{kanji:"可<rt>か</rt>愛<rt>わい</rt>い",type:"i",eng:"cute, pretty"},{kanji:"寒<rt>さむ</rt>い",type:"i",eng:"cold (weather)"},{kanji:"高<rt>たか</rt>い",type:"i",eng:"high, expensive"},{kanji:"楽<rt>たの</rt>しい",type:"i",eng:"fun, pleasant"},{kanji:"小<rt>ちい</rt>さい",type:"i",eng:"small"},{kanji:"詰<rt>つま</rt>らない",type:"i",eng:"uninteresting, boring",altOkurigana:["詰まらない"]},{kanji:"速<rt>はや</rt>い",type:"i",eng:"fast, quick"},{kanji:"古<rt>ふる</rt>い",type:"i",eng:"old (thing)"},{kanji:"欲<rt>ほ</rt>しい",type:"i",eng:"wanted, desired"},{kanji:"難<rt>むずか</rt>しい",type:"i",eng:"difficult"},{kanji:"安<rt>やす</rt>い",type:"i",eng:"cheap"},{kanji:"好<rt>す</rt>き",type:"na",eng:"like"},{kanji:"有<rt>ゆう</rt>名<rt>めい</rt>",type:"na",eng:"famous"},{kanji:"きれい",type:"na",eng:"beautiful, tidy"},{kanji:"嫌<rt>きら</rt>い",type:"na",eng:"dislike"},{kanji:"静<rt>しず</rt>か",type:"na",eng:"quiet"},{kanji:"元<rt>げん</rt>気<rt>き</rt>",type:"na",eng:"healthy"},{kanji:"色<rt>いろ</rt>々<rt>いろ</rt>",type:"na",eng:"various"},{kanji:"心<rt>しん</rt>配<rt>ぱい</rt>",type:"na",eng:"worry, care"},{kanji:"嫌<rt>いや</rt>",type:"na",eng:"unpleasant, detestable"},{kanji:"十<rt>じゅう</rt>分<rt>ぶん</rt>",type:"na",eng:"sufficient"},{kanji:"立<rt>りっ</rt>派<rt>ぱ</rt>",type:"na",eng:"excellent, splendid"},{kanji:"同<rt>おな</rt>じ",type:"na",eng:"same, alike"},{kanji:"大<rt>だい</rt>丈<rt>じょう</rt>夫<rt>ぶ</rt>",type:"na",eng:"okay, safe"},{kanji:"真<rt>ま</rt>っ<ruby>直<rt>す</rt></ruby>ぐ",type:"na",eng:"straight, direct",altOkurigana:["真直ぐ","真すぐ","真っすぐ"]},{kanji:"下<rt>へ</rt>手<rt>た</rt>",type:"na",eng:"unskilled"},{kanji:"簡<rt>かん</rt>単<rt>たん</rt>",type:"na",eng:"simple, easy"},{kanji:"楽<rt>らく</rt>",type:"na",eng:"comfortable, easy"},{kanji:"残<rt>ざん</rt>念<rt>ねん</rt>",type:"na",eng:"unfortunate, disappointing"},{kanji:"必<rt>ひつ</rt>要<rt>よう</rt>",type:"na",eng:"necessary"}]};let jt=new Set;document.querySelectorAll("#non-conjugation-settings input").forEach((t=>jt.add(t.getAttribute("name"))));let kt="ontouchstart"in window||navigator.msMaxTouchPoints>0;document.getElementById("press-any-key-text").textContent=kt?"Tap to continue":"Press Enter/Return to continue";const Et=Object.freeze({always:"always",onlyAfterAnswering:"after"}),wt=Object.freeze({question:0,results:1,settings:2}),Ot=()=>{let t=document.getElementById("options-form").querySelectorAll('[type="checkbox"]'),e={};for(let n of Array.from(t))e[n.name]=!0;return e.translationTiming=Et.always,e};function St(t){let e=JSON.parse(JSON.stringify(t));return jt.forEach((t=>{delete e[t]})),e}function It(t){let e=document.getElementById("verb-box").getElementsByTagName("p");for(let n of Array.from(e))n.style.color=t}function xt(t){let e=function(t){let e=Math.random();try{for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++){if(e<t[n][r].probability)return t[n][r];e-=t[n][r].probability}throw"no random word chosen"}catch(e){return console.log(e),t[0][0]}}(t);return function(t){document.getElementById("verb-box").style.background="none",console.log(t.wordJSON.eng),document.getElementById("verb-text").innerHTML=t.wordJSON.eng,document.getElementById("verb-type").textContent=" ",document.getElementById("conjugation-inquery-text").innerHTML=function(t){let e="";return"Past"==t.tense?e+='<div class="conjugation-inquery"><div class="inquery-emoji">⌚</div><div class="inquery-text">Past</div></div> ':"て-form"!=t.tense&&"Adverb"!=t.tense||(e+=t.tense),!0===t.affirmative?e+='<div class="conjugation-inquery"><div class="inquery-emoji">✅</div><div class="inquery-text">Affirmative</div></div> ':!1===t.affirmative&&(e+='<div class="conjugation-inquery"><div class="inquery-emoji">🚫</div><div class="inquery-text">Negative</div></div> '),!0===t.polite?e+='<div class="conjugation-inquery"><div class="inquery-emoji">👔</div><div class="inquery-text">Polite</div></div>':!1===t.polite&&(e+='<div class="conjugation-inquery"><div class="inquery-emoji">👪</div><div class="inquery-text">Plain</div></div>'),e}(t.conjugation)}(e),kt||document.getElementsByTagName("input")[0].focus(),It("rgb(232, 232, 232)"),e}class Bt{constructor(t,e,n,r){this.conjugations=t,this.tense=e,this.affirmative=n,this.polite=r}}function Nt(t,e,n,r){let i=r?"問":"と";if("present"==n){if(t&&e)return i+"います";if(t&&!e)return i+"う";if(!t&&e)return[i+"いません",i+"わないです"];if(!t&&!e)return i+"わない"}else if("past"==n){if(t&&e)return i+"いました";if(t&&!e)return i+"うた";if(!t&&e)return[i+"いませんでした",i+"わなかったです"];if(!t&&!e)return i+"わなかった"}else if("te"==n)return i+"うて"}function At(t,e,n,r){let i;if("present"==n?t&&e?i="きます":t&&!e?i="くる":!t&&e?i=["きません","こないです"]:t||e||(i="こない"):"past"==n?t&&e?i="きました":t&&!e?i="きた":!t&&e?i=["きませんでした","こなかったです"]:t||e||(i="こなかった"):"te"==n&&(i="きて"),r)if("string"==typeof i)i="来"+i.substring(1);else for(let t=0;t<i.length;t++)i[t]="来"+i[t].substring(1);return i}function Lt(t,e,n,r){let i=r?"行":"い";if("present"==n){if(t&&e)return i+"きます";if(t&&!e)return i+"く";if(!t&&e)return[i+"きません",i+"かないです"];if(!t&&!e)return i+"かない"}else if("past"==n){if(t&&e)return i+"きました";if(t&&!e)return i+"った";if(!t&&e)return[i+"きませんでした",i+"かなかったです"];if(!t&&!e)return i+"かなかった"}else if("te"==n)return i+"って"}function Ct(t,e){for(let n=1;n<=e.length;n++)if(t[t.length-n]!=e[e.length-n])return!1;return t.replace(e,"")}function qt(t,e,n,r){let i,a;if(!1!==(i=Ct(t,"いく"))?a=Lt(e,n,r,!1):!1!==(i=Ct(t,"行く"))?a=Lt(e,n,r,!0):!1!==(i=Ct(t,"する"))?a=function(t,e,n){if("present"==n){if(t&&e)return"します";if(t&&!e)return"する";if(!t&&e)return["しません","しないです"];if(!t&&!e)return"しない"}else if("past"==n){if(t&&e)return"しました";if(t&&!e)return"した";if(!t&&e)return["しませんでした","しなかったです"];if(!t&&!e)return"しなかった"}else if("te"==n)return"して"}(e,n,r):!1!==(i=Ct(t,"くる"))?a=At(e,n,r,!1):!1!==(i=Ct(t,"来る"))?a=At(e,n,r,!0):!1!==(i=Ct(t,"ある"))?a=function(t,e,n){if("present"==n){if(t&&e)return"あります";if(t&&!e)return"ある";if(!t&&e)return["ありません","ないです"];if(!t&&!e)return"ない"}else if("past"==n){if(t&&e)return"ありました";if(t&&!e)return"あった";if(!t&&e)return["ありませんでした","なかったです"];if(!t&&!e)return"なかった"}else if("te"==n)return"あって"}(e,n,r):!1!==(i=Ct(t,"とう"))?a=Nt(e,n,r,!1):!1!==(i=Ct(t,"問う"))&&(a=Nt(e,n,r,!0)),"string"==typeof a)return i+a;if(a&&a.constructor===Array){let t=[];for(let e=0;e<a.length;e++)t[e]=i+a[e];return t}return"Error"}function Jt(t,e,n){if("present"==n){if(t&&e)return["いいです","良いです"];if(t&&!e)return["いい","良い"];if(!t&&e)return["よくないです","よくありません","良くないです","良くありません"];if(!t&&!e)return["よくない","良くない"]}else if("past"==n){if(t&&e)return["よかったです","良かったです"];if(t&&!e)return["よかった","良かった"];if(!t&&e)return["よくなかったです","よくありませんでした","良くなかったです","良くありませんでした"];if(!t&&!e)return["よくなかった","良くなかった"]}else if("adverb"==n)return["よく","良く"]}function Mt(t,e,n,r){if("いい"==t)return Jt(e,n,r);if("かっこいい"==t){let t=[].concat(Jt(e,n,r));for(let e=0;e<t.length;e++)t[e]="かっこ"+t[e];return t}}function Tt(t,e){return"u"==e?t.substring(0,t.length-1)+("う"==(n=t.charAt(t.length-1))?"い":"く"==n?"き":"ぐ"==n?"ぎ":"す"==n?"し":"ず"==n?"じ":"つ"==n?"ち":"づ"==n?"ぢ":"ぬ"==n?"に":"ふ"==n?"ひ":"ぶ"==n?"び":"ぷ"==n?"ぴ":"む"==n?"み":"る"==n?"り":void console.log("Input was not う in changeUtoI, was "+n)):t.substring(0,t.length-1);var n}function Rt(t,e){return"u"==e?t.substring(0,t.length-1)+("う"==(n=t.charAt(t.length-1))?"わ":"く"==n?"か":"ぐ"==n?"が":"す"==n?"さ":"ず"==n?"ざ":"つ"==n?"た":"づ"==n?"だ":"ぬ"==n?"な":"ふ"==n?"は":"ぶ"==n?"ば":"ぷ"==n?"ぱ":"む"==n?"ま":"る"==n?"ら":void console.log("Input was not う in changeUtoA, was "+n))+"ない":t.substring(0,t.length-1)+"ない";var n}function zt(t){return t.substring(0,t.length-1)}let Wt={verb:{present:function(t,e,n,r){return"irv"==e?qt(t,n,r,"present"):n&&r?Tt(t,e)+"ます":n&&!r?t:!n&&r?[Tt(t,e)+"ません",Rt(t,e)+"です"]:n||r?void 0:Rt(t,e)},past:function(t,e,n,r){if("irv"==e)return qt(t,n,r,"past");if(n&&r)return Tt(t,e)+"ました";if(n&&!r&&"u"==e)return zt(t)+("す"==(i=t.charAt(t.length-1))?"した":"く"==i?"いた":"ぐ"==i?"いだ":"む"==i||"ぶ"==i||"ぬ"==i?"んだ":"る"==i||"う"==i||"つ"==i?"った":void console.log("Input was not real verb ending changeToPastPlain, was "+i));if(n&&!r&&"ru"==e)return Tt(t,e)+"た";if(!n&&r){let n=zt(Rt(t,e))+"かった";return[Tt(t,e)+"ませんでした",n+"です"]}if(!n&&!r){return zt(Rt(t,e))+"かった"}var i},te:function(t,e){if("irv"==e)return qt(t,!1,!1,"te");if("u"==e){let e=t.charAt(t.length-1);if("う"==e||"つ"==e||"る"==e)return zt(t)+"って";if("む"==e||"ぶ"==e||"ぬ"==e)return zt(t)+"んで";if("く"==e)return zt(t)+"いて";if("ぐ"==e)return zt(t)+"いで";if("す"==e)return zt(t)+"して"}else if("ru"==e)return Tt(t,e)+"て"}},adjective:{present:function(t,e,n,r){return"ira"==e?Mt(t,n,r,"present"):n&&r?t+"です":n&&!r&&"i"==e?t:n&&!r&&"na"==e?t+"だ":!n&&r&&"i"==e?[zt(t)+"くないです",zt(t)+"くありません"]:!n&&r&&"na"==e?[t+"じゃないです",t+"ではないです",t+"じゃありません",t+"ではありません"]:n||r||"i"!=e?n||r||"na"!=e?void 0:[t+"じゃない",t+"ではない"]:zt(t)+"くない"},past:function(t,e,n,r){return"ira"==e?Mt(t,n,r,"past"):n&&r&&"i"==e?zt(t)+"かったです":n&&r&&"na"==e?t+"でした":n&&!r&&"i"==e?zt(t)+"かった":n&&!r&&"na"==e?t+"だった":!n&&r&&"i"==e?[zt(t)+"くなかったです",zt(t)+"くありませんでした"]:!n&&r&&"na"==e?[t+"じゃなかったです",t+"ではなかったです",t+"じゃありませんでした",t+"ではありませんでした"]:n||r||"i"!=e?n||r||"na"!=e?void 0:[t+"じゃなかった",t+"ではなかった"]:zt(t)+"くなかった"},adverb:function(t,e){return"ira"==e?Mt(t,!1,!1,"adverb"):"i"==e?zt(t)+"く":"na"==e?t+"に":void 0}}};function Pt(t,e){return 0==t?"Present":1==t?"Past":2==t&&"verb"==e?"て-form":2==t&&"adjective"==e?"Adverb":void 0}function $t(t){let e,n,r=[],i=!1,a=!1,o=function(t){return"u"==t.type||"ru"==t.type||"irv"==t.type?"verb":"i"==t.type||"na"==t.type||"ira"==t.type?"adjective":void 0}(t);"verb"==o?(n=Wt.verb,e=Object.keys(n)):"adjective"==o&&(n=Wt.adjective,e=Object.keys(n));let s=t.kanji.replace(/<ruby>|<\/ruby>|.?<rt>|<\/rt>/g,"");let c,u,l=function(t){return t.replace(/<ruby>|<\/ruby>|<rt>.*?<\/rt>/g,"")}(t.kanji);for(let d=0;d<4*(e.length-1);d++){d%2==0&&(i=!i),a=!a;let f=Math.floor(d/4);if(i&&!a&&0==f&&"na"!=t.type)continue;c=n[e[f]](s,t.type,i,a),u=n[e[f]](l,t.type,i,a);let g=[];if(t.altOkurigana&&t.altOkurigana.length)for(let r=0;r<t.altOkurigana.length;r++){let o=t.altOkurigana[r];g=g.concat(n[e[f]](o,t.type,i,a))}let y=[];y=y.concat(c,u,g),r.push(new Bt(y,Pt(f,o),i,a))}c=n[e[e.length-1]](s,t.type),u=n[e[e.length-1]](l,t.type);let d=[];return d=d.concat(c,u),r.push(new Bt(d,Pt(e.length-1,o),null,null)),r}class Kt{constructor(t,e){this.wordJSON=t,this.conjugation=e,this.probability=0,this.wasRecentlyIncorrect=!1}}function Ht(t){let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=[];return e}class Vt{constructor(t,e){this.word=t,this.wasCorrect=e}}function Dt(t){let e=0;for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++)e+=t[n][r].probability;for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++)t[n][r].probability/=e}function Ut(){let t=document.getElementsByClassName("must-choose-one-text");for(let e of Array.from(t))if(e.offsetWidth>0&&e.offsetHeight>0)return void(document.getElementById("back-button").disabled=!0);document.getElementById("back-button").disabled=!1}function Qt(t){Yt(t.currentTarget)}function Xt(t,e){!function(t,e,n){n?function(t,e){-1==t.className.split(" ").indexOf(e)&&(t.className+=" "+e)}(t,e):t.className=t.className.replace(e,"")}(t,"display-none",e)}function _t(t,e,n){if(n){let n=document.getElementById("back-button");t.textContent=e,Xt(t,!1),n.disabled=!0}else Xt(t,!0),Ut()}function Ft(t,e){for(let n of Array.from(t))if(n.checked!==e)return!1;return!0}function Gt(t,e,n,r){_t(e,n,Ft(t,r))}function Yt(t){Gt(t.getElementsByTagName("input"),t.getElementsByClassName("must-choose-one-text")[0],"*Must choose at least 1 option from this category",!1)}function Zt(){let t=[document.querySelector('input[name="verb"]'),document.querySelector('input[name="adjective"]')];Xt(document.getElementById("verb-options-container"),!t[0].checked),Xt(document.getElementById("adjective-options-container"),!t[1].checked),Gt(t,document.getElementById("top-must-choose"),"*Must choose at least 1 option from this category",!1)}let te=[];const ee=document.querySelector('input[name="verbpresent"]'),ne=document.querySelector('input[name="verbaffirmative"]'),re=document.querySelector('input[name="verbplain"]');te.push(ee),te.push(ne),te.push(re);let ie=[];function ae(){let t=document.getElementById("verb-tense-group"),e=t.getElementsByClassName("must-choose-one-text")[0],n=Ft(te,!0),r=Ft(ie,!1);n&&r?(_t(e,"*Invalid combination: present, affirmative, plain",!0),Ut()):Yt(t)}ie=ie.concat(Array.from(document.getElementById("verb-tense-group").getElementsByTagName("input")).filter((t=>t!=ee))),ie=ie.concat(Array.from(document.getElementById("verb-variations-container").getElementsByTagName("input")).filter((t=>t!=ne&&t!=re)));let oe=[];const se=document.querySelector('input[name="adjectivepresent"]'),ce=document.querySelector('input[name="adjectiveaffirmative"]'),ue=document.querySelector('input[name="adjectiveplain"]');oe.push(se),oe.push(ce),oe.push(ue);let le=[];function de(){let t=document.getElementById("adjective-type-group"),e=t.getElementsByClassName("must-choose-one-text")[0],n=Ft(oe,!0),r=Ft(le,!1),i=document.querySelector('input[name="adjectivei"]'),a=document.querySelector('input[name="adjectiveirregular"]'),o=document.querySelector('input[name="adjectivena"]');n&&r&&!o.checked&&(i.checked||a.checked)?(_t(e,"*Invalid combination: い/irregular, present, affirmative, plain",!0),Ut()):document.querySelector('input[name="adjective"]').checked&&Yt(t)}function fe(t,e){let n=document.getElementsByClassName(t),r=document.getElementById(e);for(let t of Array.from(n))if(t.checked){let t=r.getElementsByClassName("options-group");for(let e of Array.from(t))Yt(e);return void Xt(r,!1)}Xt(r,!0)}function ge(){fe("verb-has-variations","verb-variations-container")}function ye(){fe("adjective-has-variations","adjective-variations-container")}function me(){Xt(document.getElementById("translation-sub-options"),!document.getElementById("translation-checkbox").checked)}function pe(t){var e;e=t.furigana,document.getElementById("verb-text").className=e?"":"hide-furigana",pt(t.emoji),ht(t.streak)}function he(t,e){pe(t);let n=Ht(e.length);const r=/^verb.+/;if(!1!==t.verb){n[0]=[...e[0]];let i=Object.keys(t).filter((t=>r.test(t)));for(let e=0;e<i.length;e++)!1===t[i[e]]&&(n[0]=n[0].filter(mt.verbs[i[e]]))}const i=/^adjective.+/;if(!1!==t.adjective){n[1]=[...e[1]];let r=Object.keys(t).filter((t=>i.test(t)));for(let e=0;e<r.length;e++)!1===t[r[e]]&&(n[1]=n[1].filter(mt.adjectives[r[e]]))}return function(t){for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)t[e][n].probability=1;Dt(t)}(n),n}le=le.concat(Array.from(document.getElementById("adjective-tense-group").getElementsByTagName("input")).filter((t=>t!=se))),le=le.concat(Array.from(document.getElementById("adjective-variations-container").getElementsByTagName("input")).filter((t=>t!=ce&&t!=ue)));class ve{constructor(t,e){this.score=t,this.settings=e}}class be{constructor(t){Z(document.getElementsByTagName("input")[0]),this.initState(t),document.getElementsByTagName("input")[0].addEventListener("keydown",(t=>this.inputKeyPress(t))),document.getElementById("options-button").addEventListener("click",(t=>this.settingsButtonClicked(t))),document.getElementById("options-form").addEventListener("submit",(t=>this.backButtonClicked(t))),document.getElementById("current-streak-text").addEventListener("animationend",(t=>{document.getElementById("current-streak-text").classList.remove(t.animationName)})),document.getElementById("max-streak-text").addEventListener("animationend",(t=>{document.getElementById("max-streak-text").classList.remove(t.animationName)})),document.getElementById("status-box").addEventListener("animationend",(t=>{document.getElementById("status-box").classList.remove(t.animationName)})),document.getElementById("input-tooltip").addEventListener("animationend",(t=>{document.getElementById("input-tooltip").classList.remove(t.animationName)})),document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("touchend",this.onTouchEnd.bind(this)),function(){let t=document.getElementsByClassName("options-group");for(let e of Array.from(t))e.addEventListener("click",Qt);let e=document.getElementsByClassName("verb-has-variations");for(let t of Array.from(e))t.addEventListener("click",ge);let n=document.getElementsByClassName("adjective-has-variations");for(let t of Array.from(n))t.addEventListener("click",ye);document.getElementById("translation-checkbox").addEventListener("click",me),document.getElementById("verbs-checkbox").addEventListener("click",Zt),document.getElementById("adjectives-checkbox").addEventListener("click",Zt);let r=document.getElementById("options-view");r.addEventListener("click",ae),r.addEventListener("click",de)}()}loadMainView(){this.state.activeScreen=wt.question,document.getElementsByTagName("input")[0].disabled=!1,document.getElementsByTagName("input")[0].value="",document.getElementById("input-tooltip").classList.remove("tooltip-fade-animation"),document.getElementById("press-any-key-text").style.display="none",document.getElementById("status-box").style.display="none",this.state.currentStreak0OnReset&&(document.getElementById("current-streak-text").textContent="0",this.state.currentStreak0OnReset=!1),this.state.loadWordOnReset&&(this.state.currentWord=xt(this.state.currentWordList),this.state.loadWordOnReset=!1),vt(this.state.settings.translation,this.state.settings.translationTiming===Et.onlyAfterAnswering)}onKeyDown(t){let e=t.keyCode?t.keyCode:t.which;this.state.activeScreen===wt.results&&"13"==e&&this.loadMainView()}onTouchEnd(t){this.state.activeScreen===wt.results&&t.target!=document.getElementById("options-button")&&this.loadMainView()}inputKeyPress(t){if("13"==(t.keyCode?t.keyCode:t.which)){this.state.activeScreen=wt.results;let e=document.getElementsByTagName("input")[0];t.stopPropagation();let n=e.value;switch(n[n.length-1]){case"n":n=n.replace(/n$/,"ん");break;case"。":n=n.replace(/。$/,"")}if(!y(n))return void document.getElementById("input-tooltip").classList.add("tooltip-fade-animation");document.getElementById("input-tooltip").classList.remove("tooltip-fade-animation"),e.blur(),function(t,e){let n=document.getElementById("status-box");var r;n.style.display="inline-flex",t.conjugation.conjugations.some((t=>t==e))?(n.style.background="green",document.getElementById("status-text").innerHTML="Correct<br>"+e+" ○"):(document.getElementById("verb-box").style.background=function(t){switch(t){case"u":return"rgb(255, 125, 0)";case"ru":return"rgb(5, 80, 245)";case"irv":case"ira":return"gray";case"i":return"rgb(0, 180, 240)";case"na":return"rgb(143, 73, 40)"}}(t.wordJSON.type),It("white"),document.getElementById("verb-type").textContent="u"==(r=t.wordJSON.type)?"う-verb":"ru"==r?"る-verb":"irv"==r||"ira"==r?"Irregular":"i"==r?"い-adjective":"na"==r?"な-adjective":void 0,n.style.background="rgb(218, 5, 5)",document.getElementById("status-text").innerHTML=(""==e?"_":e)+" ×<br>"+t.conjugation.conjugations[0]+" ○<br><ruby>"+t.wordJSON.kanji+"</ruby>")}(this.state.currentWord,n),vt(this.state.settings.translation,!1);let r=this.state.currentWord.conjugation.conjugations.some((t=>t==n));!function(t,e,n,r){if(!(t[0].length+t[1].length<3)){if(e.length>=2){let n=e.shift(),r=function(t){let e=2;for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++)e=t[n][r].probability<e&&0!=t[n][r].probability?t[n][r].probability:e;return e}(t);const i=.5,a=.85;let o;n.wasCorrect&&!n.word.wasRecentlyIncorrect?o=r*i:n.wasCorrect&&n.word.wasRecentlyIncorrect?(o=r*a,n.word.wasRecentlyIncorrect=!1):n.wasCorrect||(o=10),n.word.probability=o}r||(n.wasRecentlyIncorrect=!0),e.push(new Vt(n,r)),n.probability=0,Dt(t)}}(this.state.currentWordList,this.state.wordsRecentlySeenQueue,this.state.currentWord,r),r?(!function(t=1,e,n){if(0==t)return;let r=document.getElementById("max-streak-text"),i=document.getElementById("current-streak-text");if(parseInt(r.textContent)<=parseInt(i.textContent)){let i=parseInt(r.textContent)+t;r.textContent=i,document.getElementById("max-streak").classList.contains("display-none")||r.classList.add("grow-animation"),e[n].score=i,localStorage.setItem("maxScoreObjects",JSON.stringify(e))}i.textContent=parseInt(i.textContent)+t,document.getElementById("current-streak").classList.contains("display-none")||i.classList.add("grow-animation")}(1,this.state.maxScoreObjects,this.state.maxScoreIndex),this.state.currentStreak0OnReset=!1):this.state.currentStreak0OnReset=!0,this.state.loadWordOnReset=!0,document.getElementsByTagName("input")[0].disabled=!0,document.getElementById("press-any-key-text").style.display="table-cell",e.value=""}}settingsButtonClicked(t){this.state.activeScreen=wt.settings;let e=document.querySelectorAll('#options-form input[type="checkbox"]');for(let t of Array.from(e))t.checked=this.state.settings[t.name];switch(this.state.settings.translationTiming){case Et.always:document.getElementById("translation-always-radio").checked=!0;break;case Et.onlyAfterAnswering:document.getElementById("translation-after-radio").checked=!0}let n=document.getElementsByClassName("options-group");for(let t of Array.from(n))Yt(t);ge(),ye(),me(),Zt(),document.getElementById("main-view").style.display="none",document.getElementById("options-view").style.display="block",document.getElementById("donation-section").style.display="block"}backButtonClicked(t){t.preventDefault();let e=document.querySelectorAll('#options-form input[type="checkbox"]'),n={};for(let t of Array.from(e))this.state.settings[t.name]=t.checked,t.offsetWidth>0&&t.offsetHeight>0&&!jt.has(t.name)&&(n[t.name]=t.checked);this.state.settings.translationTiming=document.querySelector('input[name="translationTiming"]:checked')?.value??Et.always,localStorage.setItem("settings",JSON.stringify(this.state.settings));let r=function(t,e){let n,r=Object.keys(e);for(let i=0;i<t.length;i++){n=!0;for(let a of r)if(t[i].settings[a]!=e[a]){n=!1;break}if(1==n)return i}return-1}(this.state.maxScoreObjects,n);-1==r&&(this.state.maxScoreObjects.push(new ve(0,n)),localStorage.setItem("maxScoreObjects",JSON.stringify(this.state.maxScoreObjects)),r=this.state.maxScoreObjects.length-1),r!==this.state.maxScoreIndex?(localStorage.setItem("maxScoreIndex",r),this.state.maxScoreIndex=r,this.state.currentStreak0OnReset=!0,this.state.loadWordOnReset=!0,this.state.currentWordList=he(this.state.settings,this.state.completeWordList)):pe(this.state.settings),document.getElementById("max-streak-text").textContent=this.state.maxScoreObjects[this.state.maxScoreIndex].score,this.loadMainView(),document.getElementById("main-view").style.display="block",document.getElementById("options-view").style.display="none",document.getElementById("donation-section").style.display="none"}initState(t){this.state={},this.state.completeWordList=function(t){let e=Ht(t.length);for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++){let i=$t(t[n][r]);for(let a=0;a<i.length;a++)e[n].push(new Kt(t[n][r],i[a]))}return e}(t),localStorage.getItem("maxScoreIndex")?(this.state.maxScoreIndex=parseInt(localStorage.getItem("maxScoreIndex")),this.state.settings=Object.assign(Ot(),JSON.parse(localStorage.getItem("settings"))),this.state.maxScoreObjects=JSON.parse(localStorage.getItem("maxScoreObjects"))):(this.state.maxScoreIndex=0,localStorage.setItem("maxScoreIndex",this.state.maxScoreIndex),this.state.settings=Ot(),localStorage.setItem("settings",JSON.stringify(this.state.settings)),this.state.maxScoreObjects=[new ve(0,St(this.state.settings))],localStorage.setItem("maxScoreObjects",JSON.stringify(this.state.maxScoreObjects))),this.state.currentWordList=he(this.state.settings,this.state.completeWordList),this.state.currentWord=xt(this.state.currentWordList),this.state.wordsRecentlySeenQueue=[],this.state.currentStreak0OnReset=!1,this.state.loadWordOnReset=!1,document.getElementById("max-streak-text").textContent=this.state.maxScoreObjects[this.state.maxScoreIndex].score,this.loadMainView()}}new be([bt.verbs,bt.adjectives]),Xt(document.getElementById("toppest-container"),!1);